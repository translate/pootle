{% load i18n locale cache %}
{% load common_tags profile_tags %}

{% get_current_language as LANGUAGE_CODE %}

{% for item in table.rows %}
<div style="width: 20%; float: left;">
  <div style="border: solid #ccc 1px; box-sizing: border-box; margin: .2em; padding: .2em">
    <h3>{{ item.title }} ({{ item.priority }})</h3>
    {% if 'progress' in table.fields %}  
    <div class="stats-graph">
      {% if item.stats.total and item.stats.untranslated != "---" %}
      <div id="translated-ratio-{{ item.code|cssid }}" class="sortkey">
	{% widthratio item.stats.translated item.stats.total 1000 %}
      </div>
      <div id="progressbar-{{ item.code|cssid }}">
	{% cache 10000 progress_bar item.stats.total item.stats.fuzzy item.stats.translated LANGUAGE_CODE %}
	{% progress_bar item.stats.total item.stats.fuzzy item.stats.translated %}
	{% endcache %}
      </div>
      {% endif %}
    </div>
    {% endif %}
    <div>
      <div style="width: 50%; float: left; color: #c30">  
	{% if 'critical' in table.fields %}
	<span id="critical-{{ item.code|cssid }}" class="stats-number critical{% if not item.stats.critical %} zero{% endif %}">
	  {% if can_translate and item.stats.critical %}
	  <a class="stats-data non-zero" href="{{ item.href_translate }}#filter=checks&category=critical{% if item.sort %}&sort={{ item.sort }}{% endif %}">{{ item.stats.critical_display }}</a>
	  {% else %}
	  <span class="{% if item.stats.critical %}stats-data non-zero{% else %}zero muted{% endif %}">{{ item.stats.critical_display }}</span>
	  {% endif %}
	</span>
	critical checks
	{% endif %}
      </div>      
      <div style="width: 50%; float: left; color: #ba6">  
	{% if 'suggestions' in table.fields %}
	<span id="suggestions-{{ item.code|cssid }}" class="stats-number suggestions{% if not item.stats.suggestions %} zero{% endif %}">
	  {% if can_translate and item.stats.suggestions %}
	  <a class="stats-data non-zero" href="{{ item.href_translate }}#filter=suggestions{% if item.sort %}&sort={{ item.sort }}{% endif %}">{{ item.stats.suggestions_display }}</a>
	  {% else %}
	  <span class="{% if item.stats.suggestions %}stats-data non-zero{% else %}zero muted{% endif %}">{{ item.stats.suggestions_display }}</span>
	  {% endif %}
	</span>
	suggestions
	{% endif %}
      </div>      
      <div style="width: 50%; float: left; color: #0489b7">  
	{% if 'need-translation' in table.fields %}
	<span id="need-translation-{{ item.code|cssid }}" class="stats-number need-translation{% if not item.stats.incomplete %} zero{% endif %}">
	  {% if can_translate and item.stats.incomplete %}
	  <a class="stats-data non-zero" href="{{ item.href_translate }}#filter=incomplete{% if item.sort %}&sort={{ item.sort }}{% endif %}">{{ item.stats.incomplete_display }}</a>
	  {% else %}
	  <span class="{% if item.stats.incomplete %}stats-data non-zero{% else %}zero muted{% endif %}">{{ item.stats.incomplete_display }}</span>
	  {% endif %}
	</span>
	incomplete
	{% endif %}
      </div>      
      <div style="width: 50%; float: left;">              
	{% if 'total' in table.fields %}
	<span id="total-words-{{ item.code|cssid }}" class="stats-number total not-inited">
	  {% if can_translate and item.stats.untranslated != "---" %}
	  <a class="stats-data non-zero" href="{{ item.href_translate }}{% if item.sort %}#sort={{ item.sort }}{% endif %}">{{ item.stats.total_display }}</a>
	  {% else %}
	  <span class="stats-data non-zero">{{ item.stats.total_display }}</span>
	  {% endif %}
	</span>
	total
	{% endif %}
      </div>
    </div>
    <div style="clear: both"> </div>
  </div>
</div>
{% endfor %}
