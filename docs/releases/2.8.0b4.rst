=================================
Welcome to the new Pootle 2.8.0b4
=================================

*Released on 29 August 2016*

This is the third beta of 2.8.0, our next major Pootle release.

If you want to try it, check one of the following:

- :doc:`Installation instructions </server/installation>`
- :doc:`Upgrading instructions </server/upgrading>`


2.8.0b4 vs 2.8.0b3
==================

- Changed the default ``robots.txt``
- Refactored code for syncing stores
- Updated version for several requirements
- Changed how own Pootle translations are retrieved


2.8.0b3 brought the following changes:

- Translation updates
- JavaScript bugfixes


Changes in Requirements
=======================

- Django>=1.8.13,<1.9
- zlib1g-dev required for lxml
- Updated and pinned PyPI requirements


Major Changes
=============

- Undertook a security audit
- Improved editor performance
- Added pluggable search backend
- Pootle FS


Below we provide much more detail.  These are by no means exhaustive, view the
`git log
<https://github.com/translate/pootle/compare/2.7.6...2.8.0b4>`_ for complete
information.


Details of changes
==================

- Undertook a security audit
- Improved editor performance
- Added pluggable search backend
- Pootle FS:

  - CLI
  - LanguageMapper
  - FileMapper
  - Store de/serialization

- Refactored code for syncing stores
- Improved UI/stats reporting
- Changed the default ``robots.txt``

  - It is now a static file
  - Now the site is ``allow`` by default

- Editor:

  - Support rejecting/accepting suggestions with comments

    - Suggesters are emailed when their suggestions are rejected or accepted
      based on new POOTLE_EMAIL_FEEDBACK_ENABLED setting

  - Accept suggestion without "can review" permissions if submitted translation
    is 100% match.
  - Allow selecting similar translations' text in editor
  - Improvements on timeline
  - Fixed bugs in muting/unmuting checks
  - Fixed filtering translations by month
  - Fixed `TypeError` error when filter in editor gets no units

- Configuration system
- Plugin framework
- Comment system
- Added `pootle_format` app

  - Added support to have several formats in the same project

- amaGama Translation Memory is now queried using CORS
- Browse pages:

  - Stats refresh notice has been changed to be less intrusive and more helpful
  - Hide disabled items and allow showing them to admin users
  - Show leaderboard on top panel and expanded stats panel
  - Search widget is disabled if user cannot translate
  - Files dropdown no longer keeps references to empty directories
  - Fixed issue where "Back" button not always worked

- Various RTL fixes in UI
- User stats are now only visible for logged in users
- Cross-language translation is now restricted to admins since translators
  don't require them.
- Removed unperformant "More stats" in admin dashboard
- Own Pootle localization changes

  - Now ``compilejsi18n`` is used to compile JavaScript translations into
    assets, thus requiring ``django-statici18n`` app.
  - Password reset email is now localizable in Pootle

- Upload:

  - Disabled upload for non-PO projects
  - Admins can upload translations as other user

- New Machine Translation providers:

  - `Caighde√°n <https://github.com/kscanne/caighdean/blob/master/API.md>`_ - Irish
  - `Welsh <http://techiaith.cymru/api/translation/?lang=en>`_

- Added placeholders check for Plurr-formatted strings
- Improved RQ usage and new management commands
- Documentation updates


Pootle FS
---------

Pootle FS allows to synchronize Pootle against a filesystem, or VCS, allowing
to handle conflicts and several other situations that previously required
ad-hoc hacks.


Development changes
-------------------

- Tests:
  - Massive improvement in test framework
  - Coverage increased from 55% to 90%
  - Moved to tox
  - Travis caching and optimisations
- Code sanity:
  - Python code cleanup/linting pep8/pyflakes/pep257 to increase code health
  - Javascript code linting and cleanups
  - CSS code linting and cleanups
- Code polishing:
  - Moved all commands to argparse
  - Move shortcuts to Mousetrap
  - JS improvements, move to React components
- Triage meetings are now held on a weekly basis


Command changes and additions
-----------------------------

- :djadmin:`run_cherrypy` has been removed.
- :djadmin:`start` has been removed, use :djadmin:`runserver` instead.
- :djadmin:`verify_user` and :djadmin:`purge_user` now accept multiple
  usernames.
- :djadmin:`refresh_scores` now recalculates user scores and accepts
  multiple usernames.
- :djadmin:`contributors` command has been refactored in order to return more
  accurate results and has new options
  :option:`--since <contributors --since>`,
  :option:`--until <contributors --until>` and
  :option:`--mailmerge <contributors --mailmerge>`. The ``--from-revision``
  option has been removed.
- :djadmin:`list_serializers` has been added to view serializers and
  deserializers installed on your system.
- :djadmin:`flush_cache` flushes ``default``, ``redis``, ``stats`` caches,
  accepts :option:`--rqdata <flush_cache --rqdata>`,
  :option:`--stats <flush_cache --stats>`,
  :option:`--django-cache <flush_cache --django-cache>` options.
- :djadmin:`config` was added to get, set, list, append and clear configuration
  settings.
- :djadmin:`init_fs_project` was added.
- :djadmin:`set_filetype` was added.


Changes in settings
-------------------

- :setting:`POOTLE_SCORE_COEFFICIENTS` accepts custom settings for user
  scores calculation.
- :setting:`POOTLE_TM_SERVER` no longer receives the ``MIN_SCORE`` parameter, as
  it was misleading and had questionable effects.
- :setting:`POOTLE_TM_SERVER` now accepts a ``MIN_SIMILARITY`` parameter, to
  filter out results which might be irrelevant. To learn more, check the
  documenation on :setting:`MIN_SIMILARITY <POOTLE_TM_SERVER-MIN_SIMILARITY>`.
- :setting:`POOTLE_EXPORT_VIEW_LIMIT` was added, with a default value of 10000.
  This restricts how many units are shown in export views.
- :setting:`POOTLE_SEARCH_BACKEND` was added, to allow configuring the search
  backend to be used.
- :setting:`POOTLE_EMAIL_FEEDBACK_ENABLED` was added, to allow disabling sending
  emails to suggesters when suggestions are accepted or rejected.


Credits
=======

This release was made possible by the following people:

Ryan Northey, Dwayne Bailey, Julen Ruiz Aizpuru, Taras Semenenko, Leandro
Regueiro, safaalfulaij, Rene Ladan, Kevin Scannell, Jason P. Pickering, The
Gitter Badger, Rhoslyn Prys, Mikhail Paulyshka, Mike Robinson, Igor Afanasyev,
Henrik Feldt, Francesc Ortiz, Christian Lohmaier, burhan, Arash Mousavi, Andy
Kittner, Adam Chainz.

And to all our bug finders, testers and translators, a Very BIG Thank You.
